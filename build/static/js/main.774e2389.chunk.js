(this.webpackJsonpopyn=this.webpackJsonpopyn||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(11),o=n.n(i),c=(n(22),n(4)),r=n(5),l=n(12),d=n(7),h=n(6);function u(e){if(e)return e.substring(0,4)+"..."+e.substring(e.length-4,e.length)}n(23);var p=n(1),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={navOptions:["Trade","Analytics","Team","Contact"],account:"",isConnected:!1},a}return Object(r.a)(n,[{key:"connectAccounts",value:function(){var e=this;window.ethereum&&window.ethereum.request({method:"eth_requestAccounts"}).then((function(t){e.setState({account:t[0],isConnected:window.ethereum.isConnected()}),e.props.connect(window.ethereum.isConnected())})).catch((function(e){4001===e.code?console.log("Please connect to MetaMask."):console.error(e)}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("nav",{className:"opyn-nav__container flex justify-between items-center p-5",children:[Object(p.jsx)("h2",{children:"opyn"}),Object(p.jsxs)("ul",{className:"opyn-nav__options flex items-center",children:[this.state.navOptions.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"#",children:e})})})),this.state.isConnected?Object(p.jsx)("li",{className:"opyn-nav__connected-account",children:u(this.state.account)}):Object(p.jsx)("li",{children:Object(p.jsx)("button",{onClick:function(t){return e.connectAccounts(t)},className:"opyn-nav__connect-btn",children:"Connect"})})]})]})}}]),n}(s.a.Component),b=n(17),m=n(8),f=n(10),v=n(16),k=n.n(v),O=n(13),x=(n(50),n(51),["Connect Wallet","Swap"]),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={fromValue:"",toValue:"",regExp:/^[0-9]*[.,]?[0-9]*$/,primaryActionState:0,fromToken:{name:"oToken",price:90*Math.random()+10,balance:1e3},toToken:{name:"USDT",price:1,balance:1e4},isValid:!1,isLoading:!1,isApprovalLoading:!1,approvedTokens:new Set,isTokenApproved:!1},e}return Object(r.a)(n,[{key:"componentWillUpdate",value:function(e){e.connected&&!this.state.primaryActionState&&this.setState({primaryActionState:1},(function(){this.isValid()}))}},{key:"handleInputChange",value:function(e){var t=e.target.value;(""==t||this.state.regExp.test(t))&&this.setState(Object(b.a)({},e.target.name,t),(function(){this.computeToToken(t),this.isValid()}))}},{key:"approveToken",value:function(){var e=this.state,t=e.approvedTokens,n=e.fromToken;t.add(n.name),this.setState({approvedTokens:t})}},{key:"computeToToken",value:function(e){var t=this.state.fromToken.price/this.state.toToken.price;this.setState({toValue:(t*e).toFixed(2)})}},{key:"isValid",value:function(){var e=this.state,t=e.fromValue,n=e.fromToken,a=e.isTokenApproved;1===this.state.primaryActionState&&t>0&&a&&n.balance>0&&t<=n.balance?this.setState({isValid:!0}):this.setState({isValid:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.isValid&&this.handleLoadingState()}},{key:"computeTrade",value:function(){var e=this.state.fromToken,t=this.state.toToken;e.balance-=parseFloat(this.state.fromValue),t.balance+=parseFloat(this.state.toValue),this.setState({fromValue:"",toValue:"",fromToken:e,toToken:t},(function(){this.isValid()}))}},{key:"conversionLogic",value:function(){if(this.state.isValid){var e=this.state.fromToken.price/this.state.toToken.price;return Object(p.jsxs)("span",{children:["1 ",this.state.fromToken.name," = ",e," ",this.state.toToken.name]})}return Object(p.jsx)("span",{children:"Please approve token and check balance is sufficient"})}},{key:"handleLoadingState",value:function(){var e=this;this.setState({isLoading:!0}),setTimeout((function(){e.setState({isLoading:!1}),e.computeTrade(),O.b.dark("\u2728 Trade successfully executed!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),5e3)}},{key:"handleSwapArrowClick",value:function(e){var t=this;e.preventDefault(),this.setState({fromToken:this.state.toToken,toToken:this.state.fromToken},(function(){t.checkTokenApproval()}))}},{key:"checkTokenApproval",value:function(){var e=this.state,t=e.approvedTokens,n=e.fromToken;t.has(n.name)?this.setState({isTokenApproved:!0}):this.setState({isTokenApproved:!1})}},{key:"handleMaxClick",value:function(e){e.preventDefault();var t=this.state.fromToken.price/this.state.toToken.price;this.setState({fromValue:this.state.fromToken.balance,toValue:(t*this.state.fromToken.balance).toFixed(2)},(function(){this.isValid()}))}},{key:"handleApproval",value:function(e){var t=this;e.preventDefault(),this.setState({isApprovalLoading:!0}),setTimeout((function(){t.approveToken(),t.setState({isApprovalLoading:!1,isTokenApproved:!0}),t.isValid(),O.b.dark("\u2728 "+t.state.fromToken.name+" has been approved!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),5e3)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"opyn-trade__modal-container flex justify-center items-center",children:[Object(p.jsx)(O.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(p.jsxs)("div",{className:"opyn-trade__modal-contents",children:[Object(p.jsxs)("ul",{className:"opyn-trade__setting-options flex justify-end mb-4",children:[Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:Object(p.jsx)(m.a,{icon:f.c})})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:Object(p.jsx)(m.a,{icon:f.b})})})]}),Object(p.jsxs)("form",{className:"opyn-trade__input-container",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("label",{className:"flex justify-between items-center",children:[Object(p.jsx)("span",{children:"Pay"}),Object(p.jsxs)("a",{onClick:function(t){return e.handleMaxClick(t)},href:"#",className:"opyn-trade__label-span opyn-trade__label-click",children:["Max: ",this.state.fromToken.balance]})]}),Object(p.jsxs)("div",{className:"opyn-trade__value-container flex justify-between mt-1",children:[Object(p.jsx)("button",{className:"opyn-trade__token-btn",children:this.state.fromToken.name}),Object(p.jsx)("input",{onChange:function(t){return e.handleInputChange(t)},inputmode:"decimal",autocomplete:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:"0.0",minlength:"1",maxlength:"79",name:"fromValue",value:this.state.fromValue}),!this.state.isTokenApproved&&this.state.primaryActionState?Object(p.jsx)("button",{onClick:function(t){return e.handleApproval(t)},className:"opyn-trade__approve-btn",children:this.state.isApprovalLoading?Object(p.jsx)(k.a,{type:"TailSpin",color:"#00BFFF",height:20,width:20}):Object(p.jsxs)("div",{children:[Object(p.jsx)(m.a,{icon:f.d})," ",Object(p.jsx)("span",{children:"Approve"})]})}):null]})]}),Object(p.jsx)("button",{onClick:function(t){return e.handleSwapArrowClick(t)},className:"opyn-trade__side-swap mt-4",children:Object(p.jsx)(m.a,{icon:f.a})}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("label",{className:"flex justify-between items-center",children:[Object(p.jsx)("span",{children:"Receive"}),Object(p.jsxs)("span",{className:"opyn-trade__label-span",children:["Available: ",this.state.toToken.balance]})]}),Object(p.jsxs)("div",{className:"opyn-trade__value-container flex justify-between mt-1",children:[Object(p.jsx)("button",{className:"opyn-trade__token-btn",children:this.state.toToken.name}),Object(p.jsx)("input",{inputmode:"decimal",type:"text",placeholder:"0.0",name:"toValue",value:this.state.toValue,readOnly:!0})]})]}),Object(p.jsx)("div",{className:"opyn-trade__conv-container my-4",children:this.conversionLogic()}),Object(p.jsxs)("ul",{className:"opyn-trade__detail-container",children:[Object(p.jsxs)("li",{children:[Object(p.jsx)("span",{children:"Slippage Tolerance"}),Object(p.jsx)("span",{children:"0.5%"})]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("span",{children:"Minimum Received"}),Object(p.jsx)("span",{children:"0"})]})]}),Object(p.jsx)("div",{className:"opyn-trade__submission-container mt-4",children:Object(p.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:this.state.isValid?"opyn-trade__primary-btn flex items-center justify-center":"opyn-trade__primary-btn opyn-trade__primary-btn-invalid",children:this.state.isLoading?Object(p.jsx)(k.a,{type:"TailSpin",color:"#00BFFF",className:"",height:40,width:40}):x[this.state.primaryActionState]})})]})]})]})}}]),n}(s.a.Component),T=(n(52),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={isConnected:!1},e.connectCache=e.connectCache.bind(Object(l.a)(e)),e}return Object(r.a)(n,[{key:"connectCache",value:function(e){this.setState({isConnected:e})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"opyn-main__container",children:[Object(p.jsx)(j,{connect:this.connectCache}),Object(p.jsx)(y,{connected:this.state.isConnected})]})}}]),n}(s.a.Component)),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root")),g()}},[[53,1,2]]]);
//# sourceMappingURL=main.774e2389.chunk.js.map